<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (version 1.7.0_45) on Mon Jan 06 22:31:26 CST 2014 -->
<meta http-equiv="Content-Type" content="text/html" charset="UTF-8">
<title>ThreadContextTransactionManager (XFlatDB 0.9 API)</title>
<meta name="date" content="2014-01-06">
<link rel="stylesheet" type="text/css" href="../../../../stylesheet.css" title="Style">
</head>
<body>
<script type="text/javascript"><!--
    if (location.href.indexOf('is-external=true') == -1) {
        parent.document.title="ThreadContextTransactionManager (XFlatDB 0.9 API)";
    }
//-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar_top">
<!--   -->
</a><a href="#skip-navbar_top" title="Skip navigation links"></a><a name="navbar_top_firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/ThreadContextTransactionManager.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../index-all.html">Index</a></li>
<li><a href="../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../org/xflatdb/xflat/transaction/Propagation.html" title="enum in org.xflatdb.xflat.transaction"><span class="strong">Prev Class</span></a></li>
<li><a href="../../../../org/xflatdb/xflat/transaction/ThreadContextTransactionManager.AmbientThreadedTransactionScope.html" title="class in org.xflatdb.xflat.transaction"><span class="strong">Next Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../index.html?org/xflatdb/xflat/transaction/ThreadContextTransactionManager.html" target="_top">Frames</a></li>
<li><a href="ThreadContextTransactionManager.html" target="_top">No Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../../allclasses-noframe.html">All Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li><a href="#nested_class_summary">Nested</a>&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor_summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor_detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_detail">Method</a></li>
</ul>
</div>
<a name="skip-navbar_top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">org.xflatdb.xflat.transaction</div>
<h2 title="Class ThreadContextTransactionManager" class="title">Class ThreadContextTransactionManager</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li><a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">java.lang.Object</a></li>
<li>
<ul class="inheritance">
<li><a href="../../../../org/xflatdb/xflat/db/EngineTransactionManager.html" title="class in org.xflatdb.xflat.db">org.xflatdb.xflat.db.EngineTransactionManager</a></li>
<li>
<ul class="inheritance">
<li>org.xflatdb.xflat.transaction.ThreadContextTransactionManager</li>
</ul>
</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<dl>
<dt>All Implemented Interfaces:</dt>
<dd><a href="http://docs.oracle.com/javase/7/docs/api/java/lang/AutoCloseable.html?is-external=true" title="class or interface in java.lang">AutoCloseable</a>, <a href="../../../../org/xflatdb/xflat/transaction/TransactionManager.html" title="interface in org.xflatdb.xflat.transaction">TransactionManager</a></dd>
</dl>
<hr>
<br>
<pre>public class <span class="strong">ThreadContextTransactionManager</span>
extends <a href="../../../../org/xflatdb/xflat/db/EngineTransactionManager.html" title="class in org.xflatdb.xflat.db">EngineTransactionManager</a></pre>
<div class="block">A <a href="../../../../org/xflatdb/xflat/transaction/TransactionManager.html" title="interface in org.xflatdb.xflat.transaction"><code>TransactionManager</code></a> that uses the current thread as the context for transactions.
 Each transaction opened by this manager will be bound to the current thread, and
 the <a href="../../../../org/xflatdb/xflat/transaction/ThreadContextTransactionManager.html#getTransaction()"><code>getTransaction()</code></a> method will return the transaction open on the current
 thread, if any.
 <p/>
 This is the default TransactionManager used by XFlat.</div>
<dl><dt><span class="strong">Author:</span></dt>
  <dd>Gordon</dd></dl>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- ======== NESTED CLASS SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="nested_class_summary">
<!--   -->
</a>
<h3>Nested Class Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Nested Class Summary table, listing nested classes, and an explanation">
<caption><span>Nested Classes</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Class and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected class&nbsp;</code></td>
<td class="colLast"><code><strong><a href="../../../../org/xflatdb/xflat/transaction/ThreadContextTransactionManager.AmbientThreadedTransactionScope.html" title="class in org.xflatdb.xflat.transaction">ThreadContextTransactionManager.AmbientThreadedTransactionScope</a></strong></code>
<div class="block">A Transaction that is meant to exist within the context of one thread.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>protected class&nbsp;</code></td>
<td class="colLast"><code><strong><a href="../../../../org/xflatdb/xflat/transaction/ThreadContextTransactionManager.EmptyTransactionScope.html" title="class in org.xflatdb.xflat.transaction">ThreadContextTransactionManager.EmptyTransactionScope</a></strong></code>
<div class="block">A transaction object that represents no open transaction.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected class&nbsp;</code></td>
<td class="colLast"><code><strong><a href="../../../../org/xflatdb/xflat/transaction/ThreadContextTransactionManager.NotSupportedTransaction.html" title="class in org.xflatdb.xflat.transaction">ThreadContextTransactionManager.NotSupportedTransaction</a></strong></code>
<div class="block">A transaction that implements the <a href="../../../../org/xflatdb/xflat/transaction/Propagation.html#NOT_SUPPORTED"><code>Propagation.NOT_SUPPORTED</code></a> behavior,
 maintaining a reference to the suspended transaction so that it can be
 replaced when this is closed.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>protected class&nbsp;</code></td>
<td class="colLast"><code><strong><a href="../../../../org/xflatdb/xflat/transaction/ThreadContextTransactionManager.TransactionBase.html" title="class in org.xflatdb.xflat.transaction">ThreadContextTransactionManager.TransactionBase</a></strong></code>
<div class="block">The base class for the different types of transactions handled by this
 transaction manager.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected class&nbsp;</code></td>
<td class="colLast"><code><strong><a href="../../../../org/xflatdb/xflat/transaction/ThreadContextTransactionManager.WrappingTransactionScope.html" title="class in org.xflatdb.xflat.transaction">ThreadContextTransactionManager.WrappingTransactionScope</a></strong></code>
<div class="block">A TransactionScope object that provides a view onto the ambient scope.</div>
</td>
</tr>
</table>
</li>
</ul>
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor_summary">
<!--   -->
</a>
<h3>Constructor Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Constructor Summary table, listing constructors, and an explanation">
<caption><span>Constructors</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colOne" scope="col">Constructor and Description</th>
</tr>
<tr class="altColor">
<td class="colOne"><code><strong><a href="../../../../org/xflatdb/xflat/transaction/ThreadContextTransactionManager.html#ThreadContextTransactionManager(org.xflatdb.xflat.util.DocumentFileWrapper)">ThreadContextTransactionManager</a></strong>(<a href="../../../../org/xflatdb/xflat/util/DocumentFileWrapper.html" title="class in org.xflatdb.xflat.util">DocumentFileWrapper</a>&nbsp;wrapper)</code>
<div class="block">Creates a new ThreadContextTransactionManager, which will manage a mapping
 of threads to transactions.</div>
</td>
</tr>
</table>
</li>
</ul>
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method_summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span>Methods</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><strong><a href="../../../../org/xflatdb/xflat/transaction/ThreadContextTransactionManager.html#anyOpenTransactions()">anyOpenTransactions</a></strong>()</code>
<div class="block">Returns true if any transactions are currently open.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../org/xflatdb/xflat/transaction/ThreadContextTransactionManager.html#bindEngineToCurrentTransaction(org.xflatdb.xflat.db.EngineBase)">bindEngineToCurrentTransaction</a></strong>(<a href="../../../../org/xflatdb/xflat/db/EngineBase.html" title="class in org.xflatdb.xflat.db">EngineBase</a>&nbsp;engine)</code>
<div class="block">Called by an engine in order to bind itself to a transaction.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../org/xflatdb/xflat/transaction/ThreadContextTransactionManager.html#close()">close</a></strong>()</code>
<div class="block">Closes any resources in use by this transaction manager in preparation
 for shutdown.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>protected <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Long.html?is-external=true" title="class or interface in java.lang">Long</a></code></td>
<td class="colLast"><code><strong><a href="../../../../org/xflatdb/xflat/transaction/ThreadContextTransactionManager.html#getContextId()">getContextId</a></strong>()</code>
<div class="block">Gets the Id of the current context, which is the current thread's ID.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>long</code></td>
<td class="colLast"><code><strong><a href="../../../../org/xflatdb/xflat/transaction/ThreadContextTransactionManager.html#getLowestOpenTransaction()">getLowestOpenTransaction</a></strong>()</code>
<div class="block">Gets the ID of the earliest open transaction.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code><a href="../../../../org/xflatdb/xflat/transaction/Transaction.html" title="interface in org.xflatdb.xflat.transaction">Transaction</a></code></td>
<td class="colLast"><code><strong><a href="../../../../org/xflatdb/xflat/transaction/ThreadContextTransactionManager.html#getTransaction()">getTransaction</a></strong>()</code>
<div class="block">Gets the current transaction representing the ambient transaction scope,
 or null if the current scope is transactionless.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><strong><a href="../../../../org/xflatdb/xflat/transaction/ThreadContextTransactionManager.html#isCommitInProgress(long)">isCommitInProgress</a></strong>(long&nbsp;transactionId)</code>
<div class="block">Checks to see if the given transaction ID is not yet finished committing.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>long</code></td>
<td class="colLast"><code><strong><a href="../../../../org/xflatdb/xflat/transaction/ThreadContextTransactionManager.html#isTransactionCommitted(long)">isTransactionCommitted</a></strong>(long&nbsp;transactionId)</code>
<div class="block">Checks to see if the given transaction ID has been committed.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><strong><a href="../../../../org/xflatdb/xflat/transaction/ThreadContextTransactionManager.html#isTransactionReverted(long)">isTransactionReverted</a></strong>(long&nbsp;transactionId)</code>
<div class="block">Checks to see if the given transaction ID has been reverted.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code><a href="../../../../org/xflatdb/xflat/transaction/TransactionScope.html" title="interface in org.xflatdb.xflat.transaction">TransactionScope</a></code></td>
<td class="colLast"><code><strong><a href="../../../../org/xflatdb/xflat/transaction/ThreadContextTransactionManager.html#openTransaction()">openTransaction</a></strong>()</code>
<div class="block">Opens a new transaction scope, using the <a href="../../../../org/xflatdb/xflat/transaction/TransactionOptions.html#DEFAULT"><code>TransactionOptions.DEFAULT</code></a> options.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code><a href="../../../../org/xflatdb/xflat/transaction/TransactionScope.html" title="interface in org.xflatdb.xflat.transaction">TransactionScope</a></code></td>
<td class="colLast"><code><strong><a href="../../../../org/xflatdb/xflat/transaction/ThreadContextTransactionManager.html#openTransaction(org.xflatdb.xflat.transaction.TransactionOptions)">openTransaction</a></strong>(<a href="../../../../org/xflatdb/xflat/transaction/TransactionOptions.html" title="class in org.xflatdb.xflat.transaction">TransactionOptions</a>&nbsp;options)</code>
<div class="block">Opens a new transaction scope, using the given TransactionOptions.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../org/xflatdb/xflat/transaction/ThreadContextTransactionManager.html#recover(org.xflatdb.xflat.db.XFlatDatabase)">recover</a></strong>(<a href="../../../../org/xflatdb/xflat/db/XFlatDatabase.html" title="class in org.xflatdb.xflat.db">XFlatDatabase</a>&nbsp;db)</code>
<div class="block">Attempts to recover from an unexpected shutdown if necessary.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>long</code></td>
<td class="colLast"><code><strong><a href="../../../../org/xflatdb/xflat/transaction/ThreadContextTransactionManager.html#transactionlessCommitId()">transactionlessCommitId</a></strong>()</code>
<div class="block">Gets a new commit ID for a transactionless write operation.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../org/xflatdb/xflat/transaction/ThreadContextTransactionManager.html#unbindEngineExceptFrom(org.xflatdb.xflat.db.EngineBase, java.util.Collection)">unbindEngineExceptFrom</a></strong>(<a href="../../../../org/xflatdb/xflat/db/EngineBase.html" title="class in org.xflatdb.xflat.db">EngineBase</a>&nbsp;engine,
                      <a href="http://docs.oracle.com/javase/7/docs/api/java/util/Collection.html?is-external=true" title="class or interface in java.util">Collection</a>&lt;<a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Long.html?is-external=true" title="class or interface in java.lang">Long</a>&gt;&nbsp;transactionIds)</code>
<div class="block">Unbinds the engine from all its bound and closed transactions except the given collection.<br/>
 The engine will not be unbound from any open transactions.</div>
</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="methods_inherited_from_class_org.xflatdb.xflat.db.EngineTransactionManager">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;org.xflatdb.xflat.db.<a href="../../../../org/xflatdb/xflat/db/EngineTransactionManager.html" title="class in org.xflatdb.xflat.db">EngineTransactionManager</a></h3>
<code><a href="../../../../org/xflatdb/xflat/db/EngineTransactionManager.html#generateNewId()">generateNewId</a></code></li>
</ul>
<ul class="blockList">
<li class="blockList"><a name="methods_inherited_from_class_java.lang.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.<a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a></h3>
<code><a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#clone()" title="class or interface in java.lang">clone</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#equals(java.lang.Object)" title="class or interface in java.lang">equals</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#finalize()" title="class or interface in java.lang">finalize</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#getClass()" title="class or interface in java.lang">getClass</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#hashCode()" title="class or interface in java.lang">hashCode</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#notify()" title="class or interface in java.lang">notify</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#notifyAll()" title="class or interface in java.lang">notifyAll</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#toString()" title="class or interface in java.lang">toString</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#wait()" title="class or interface in java.lang">wait</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#wait(long)" title="class or interface in java.lang">wait</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#wait(long, int)" title="class or interface in java.lang">wait</a></code></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor_detail">
<!--   -->
</a>
<h3>Constructor Detail</h3>
<a name="ThreadContextTransactionManager(org.xflatdb.xflat.util.DocumentFileWrapper)">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>ThreadContextTransactionManager</h4>
<pre>public&nbsp;ThreadContextTransactionManager(<a href="../../../../org/xflatdb/xflat/util/DocumentFileWrapper.html" title="class in org.xflatdb.xflat.util">DocumentFileWrapper</a>&nbsp;wrapper)</pre>
<div class="block">Creates a new ThreadContextTransactionManager, which will manage a mapping
 of threads to transactions.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>wrapper</code> - A wrapper which wraps the file to which this Transaction Manager
 can save its Transaction Journal, for recovery in case of catastrophic error.</dd></dl>
</li>
</ul>
</li>
</ul>
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method_detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="getContextId()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getContextId</h4>
<pre>protected&nbsp;<a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Long.html?is-external=true" title="class or interface in java.lang">Long</a>&nbsp;getContextId()</pre>
<div class="block">Gets the Id of the current context, which is the current thread's ID.</div>
<dl><dt><span class="strong">Returns:</span></dt><dd>The current thread's ID.</dd></dl>
</li>
</ul>
<a name="getTransaction()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getTransaction</h4>
<pre>public&nbsp;<a href="../../../../org/xflatdb/xflat/transaction/Transaction.html" title="interface in org.xflatdb.xflat.transaction">Transaction</a>&nbsp;getTransaction()</pre>
<div class="block"><strong>Description copied from interface:&nbsp;<code><a href="../../../../org/xflatdb/xflat/transaction/TransactionManager.html#getTransaction()">TransactionManager</a></code></strong></div>
<div class="block">Gets the current transaction representing the ambient transaction scope,
 or null if the current scope is transactionless.</div>
</li>
</ul>
<a name="openTransaction()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>openTransaction</h4>
<pre>public&nbsp;<a href="../../../../org/xflatdb/xflat/transaction/TransactionScope.html" title="interface in org.xflatdb.xflat.transaction">TransactionScope</a>&nbsp;openTransaction()
                                 throws <a href="../../../../org/xflatdb/xflat/transaction/TransactionPropagationException.html" title="class in org.xflatdb.xflat.transaction">TransactionPropagationException</a></pre>
<div class="block"><strong>Description copied from interface:&nbsp;<code><a href="../../../../org/xflatdb/xflat/transaction/TransactionManager.html#openTransaction()">TransactionManager</a></code></strong></div>
<div class="block">Opens a new transaction scope, using the <a href="../../../../org/xflatdb/xflat/transaction/TransactionOptions.html#DEFAULT"><code>TransactionOptions.DEFAULT</code></a> options.
 If a transaction is already open in this context, an IllegalStateException
 is thrown.</div>
<dl><dt><span class="strong">Returns:</span></dt><dd>A new Transaction object representing the transaction open in this context.</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="../../../../org/xflatdb/xflat/transaction/TransactionPropagationException.html" title="class in org.xflatdb.xflat.transaction">TransactionPropagationException</a></code></dd></dl>
</li>
</ul>
<a name="openTransaction(org.xflatdb.xflat.transaction.TransactionOptions)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>openTransaction</h4>
<pre>public&nbsp;<a href="../../../../org/xflatdb/xflat/transaction/TransactionScope.html" title="interface in org.xflatdb.xflat.transaction">TransactionScope</a>&nbsp;openTransaction(<a href="../../../../org/xflatdb/xflat/transaction/TransactionOptions.html" title="class in org.xflatdb.xflat.transaction">TransactionOptions</a>&nbsp;options)
                                 throws <a href="../../../../org/xflatdb/xflat/transaction/TransactionPropagationException.html" title="class in org.xflatdb.xflat.transaction">TransactionPropagationException</a></pre>
<div class="block"><strong>Description copied from interface:&nbsp;<code><a href="../../../../org/xflatdb/xflat/transaction/TransactionManager.html#openTransaction(org.xflatdb.xflat.transaction.TransactionOptions)">TransactionManager</a></code></strong></div>
<div class="block">Opens a new transaction scope, using the given TransactionOptions.  A
 TransactionScope will create or participate in an ambient transaction,
 depending on the Propagation options.  
 <p/>
 The ambient transaction is committed
 only when all its associated TransactionScopes are committed.<br/>
 If any TransactionScope is reverted, the entire ambient transaction is reverted.<br/>
 The ambient transaction is destroyed when the last TransactionScope is closed.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>options</code> - The TransactionOptions to apply to this transaction.</dd>
<dt><span class="strong">Returns:</span></dt><dd>A new Transaction object representing the transaction open in this context.</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="../../../../org/xflatdb/xflat/transaction/TransactionPropagationException.html" title="class in org.xflatdb.xflat.transaction">TransactionPropagationException</a></code></dd></dl>
</li>
</ul>
<a name="isTransactionCommitted(long)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>isTransactionCommitted</h4>
<pre>public&nbsp;long&nbsp;isTransactionCommitted(long&nbsp;transactionId)</pre>
<div class="block"><strong>Description copied from class:&nbsp;<code><a href="../../../../org/xflatdb/xflat/db/EngineTransactionManager.html#isTransactionCommitted(long)">EngineTransactionManager</a></code></strong></div>
<div class="block">Checks to see if the given transaction ID has been committed.  If so,
 returns the transaction's commit ID.  Otherwise returns -1.
 <p/>
 This method is only valid so long as at least one engine is bound
 to the transaction.  If no engines are bound to the transaction,
 this may return erroneous data.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../../org/xflatdb/xflat/db/EngineTransactionManager.html#isTransactionCommitted(long)">isTransactionCommitted</a></code>&nbsp;in class&nbsp;<code><a href="../../../../org/xflatdb/xflat/db/EngineTransactionManager.html" title="class in org.xflatdb.xflat.db">EngineTransactionManager</a></code></dd>
<dt><span class="strong">Parameters:</span></dt><dd><code>transactionId</code> - The ID of the transaction to check.</dd>
<dt><span class="strong">Returns:</span></dt><dd>the transaction's commit ID if committed, -1 otherwise.</dd></dl>
</li>
</ul>
<a name="isTransactionReverted(long)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>isTransactionReverted</h4>
<pre>public&nbsp;boolean&nbsp;isTransactionReverted(long&nbsp;transactionId)</pre>
<div class="block"><strong>Description copied from class:&nbsp;<code><a href="../../../../org/xflatdb/xflat/db/EngineTransactionManager.html#isTransactionReverted(long)">EngineTransactionManager</a></code></strong></div>
<div class="block">Checks to see if the given transaction ID has been reverted.  If so,
 returns true, otherwise false.
 </p>
 This method is only valid so long as at least one engine is bound
 to the transaction.  If no engines are bound to the transaction,
 this may return erroneous data.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../../org/xflatdb/xflat/db/EngineTransactionManager.html#isTransactionReverted(long)">isTransactionReverted</a></code>&nbsp;in class&nbsp;<code><a href="../../../../org/xflatdb/xflat/db/EngineTransactionManager.html" title="class in org.xflatdb.xflat.db">EngineTransactionManager</a></code></dd>
<dt><span class="strong">Parameters:</span></dt><dd><code>transactionId</code> - The ID of the transaction to check.</dd>
<dt><span class="strong">Returns:</span></dt><dd>true if the transaction is reverted, false otherwise.</dd></dl>
</li>
</ul>
<a name="transactionlessCommitId()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>transactionlessCommitId</h4>
<pre>public&nbsp;long&nbsp;transactionlessCommitId()</pre>
<div class="block"><strong>Description copied from class:&nbsp;<code><a href="../../../../org/xflatdb/xflat/db/EngineTransactionManager.html#transactionlessCommitId()">EngineTransactionManager</a></code></strong></div>
<div class="block">Gets a new commit ID for a transactionless write operation.
 All transactionless writes can be thought of as transactions that are
 automatically committed.  This allows us to provide snapshot isolation between
 transactions and transactionless writes.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../../org/xflatdb/xflat/db/EngineTransactionManager.html#transactionlessCommitId()">transactionlessCommitId</a></code>&nbsp;in class&nbsp;<code><a href="../../../../org/xflatdb/xflat/db/EngineTransactionManager.html" title="class in org.xflatdb.xflat.db">EngineTransactionManager</a></code></dd>
<dt><span class="strong">Returns:</span></dt><dd>A transaction ID that functions as a "snapshot ID" for this particular
 transactionless operation.</dd></dl>
</li>
</ul>
<a name="getLowestOpenTransaction()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getLowestOpenTransaction</h4>
<pre>public&nbsp;long&nbsp;getLowestOpenTransaction()</pre>
<div class="block"><strong>Description copied from class:&nbsp;<code><a href="../../../../org/xflatdb/xflat/db/EngineTransactionManager.html#getLowestOpenTransaction()">EngineTransactionManager</a></code></strong></div>
<div class="block">Gets the ID of the earliest open transaction.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../../org/xflatdb/xflat/db/EngineTransactionManager.html#getLowestOpenTransaction()">getLowestOpenTransaction</a></code>&nbsp;in class&nbsp;<code><a href="../../../../org/xflatdb/xflat/db/EngineTransactionManager.html" title="class in org.xflatdb.xflat.db">EngineTransactionManager</a></code></dd>
<dt><span class="strong">Returns:</span></dt><dd>The ID of the earliest open transaction.</dd></dl>
</li>
</ul>
<a name="bindEngineToCurrentTransaction(org.xflatdb.xflat.db.EngineBase)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>bindEngineToCurrentTransaction</h4>
<pre>public&nbsp;void&nbsp;bindEngineToCurrentTransaction(<a href="../../../../org/xflatdb/xflat/db/EngineBase.html" title="class in org.xflatdb.xflat.db">EngineBase</a>&nbsp;engine)</pre>
<div class="block"><strong>Description copied from class:&nbsp;<code><a href="../../../../org/xflatdb/xflat/db/EngineTransactionManager.html#bindEngineToCurrentTransaction(org.xflatdb.xflat.db.EngineBase)">EngineTransactionManager</a></code></strong></div>
<div class="block">Called by an engine in order to bind itself to a transaction.  This means
 that the engine has transactional data for this transaction, so the 
 transaction manager will not forget about the transaction so long as
 engine remains bound to it.
 <p/>  
 If the engine is already bound to the transaction, this method does nothing.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../../org/xflatdb/xflat/db/EngineTransactionManager.html#bindEngineToCurrentTransaction(org.xflatdb.xflat.db.EngineBase)">bindEngineToCurrentTransaction</a></code>&nbsp;in class&nbsp;<code><a href="../../../../org/xflatdb/xflat/db/EngineTransactionManager.html" title="class in org.xflatdb.xflat.db">EngineTransactionManager</a></code></dd>
<dt><span class="strong">Parameters:</span></dt><dd><code>engine</code> - The engine to bind to a transaction.</dd></dl>
</li>
</ul>
<a name="unbindEngineExceptFrom(org.xflatdb.xflat.db.EngineBase, java.util.Collection)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>unbindEngineExceptFrom</h4>
<pre>public&nbsp;void&nbsp;unbindEngineExceptFrom(<a href="../../../../org/xflatdb/xflat/db/EngineBase.html" title="class in org.xflatdb.xflat.db">EngineBase</a>&nbsp;engine,
                          <a href="http://docs.oracle.com/javase/7/docs/api/java/util/Collection.html?is-external=true" title="class or interface in java.util">Collection</a>&lt;<a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Long.html?is-external=true" title="class or interface in java.lang">Long</a>&gt;&nbsp;transactionIds)</pre>
<div class="block"><strong>Description copied from class:&nbsp;<code><a href="../../../../org/xflatdb/xflat/db/EngineTransactionManager.html#unbindEngineExceptFrom(org.xflatdb.xflat.db.EngineBase, java.util.Collection)">EngineTransactionManager</a></code></strong></div>
<div class="block">Unbinds the engine from all its bound and closed transactions except the given collection.<br/>
 The engine will not be unbound from any open transactions.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../../org/xflatdb/xflat/db/EngineTransactionManager.html#unbindEngineExceptFrom(org.xflatdb.xflat.db.EngineBase, java.util.Collection)">unbindEngineExceptFrom</a></code>&nbsp;in class&nbsp;<code><a href="../../../../org/xflatdb/xflat/db/EngineTransactionManager.html" title="class in org.xflatdb.xflat.db">EngineTransactionManager</a></code></dd>
<dt><span class="strong">Parameters:</span></dt><dd><code>engine</code> - The engine to unbind.</dd><dd><code>transactionIds</code> - The transactions to remain bound to.</dd></dl>
</li>
</ul>
<a name="anyOpenTransactions()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>anyOpenTransactions</h4>
<pre>public&nbsp;boolean&nbsp;anyOpenTransactions()</pre>
<div class="block"><strong>Description copied from class:&nbsp;<code><a href="../../../../org/xflatdb/xflat/db/EngineTransactionManager.html#anyOpenTransactions()">EngineTransactionManager</a></code></strong></div>
<div class="block">Returns true if any transactions are currently open.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../../org/xflatdb/xflat/db/EngineTransactionManager.html#anyOpenTransactions()">anyOpenTransactions</a></code>&nbsp;in class&nbsp;<code><a href="../../../../org/xflatdb/xflat/db/EngineTransactionManager.html" title="class in org.xflatdb.xflat.db">EngineTransactionManager</a></code></dd>
</dl>
</li>
</ul>
<a name="close()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>close</h4>
<pre>public&nbsp;void&nbsp;close()</pre>
<div class="block"><strong>Description copied from class:&nbsp;<code><a href="../../../../org/xflatdb/xflat/db/EngineTransactionManager.html#close()">EngineTransactionManager</a></code></strong></div>
<div class="block">Closes any resources in use by this transaction manager in preparation
 for shutdown.  Any exceptions at this point should be logged but not
 rethrown since this is only used during shutdown.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="http://docs.oracle.com/javase/7/docs/api/java/lang/AutoCloseable.html?is-external=true#close()" title="class or interface in java.lang">close</a></code>&nbsp;in interface&nbsp;<code><a href="http://docs.oracle.com/javase/7/docs/api/java/lang/AutoCloseable.html?is-external=true" title="class or interface in java.lang">AutoCloseable</a></code></dd>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../../org/xflatdb/xflat/db/EngineTransactionManager.html#close()">close</a></code>&nbsp;in class&nbsp;<code><a href="../../../../org/xflatdb/xflat/db/EngineTransactionManager.html" title="class in org.xflatdb.xflat.db">EngineTransactionManager</a></code></dd>
</dl>
</li>
</ul>
<a name="recover(org.xflatdb.xflat.db.XFlatDatabase)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>recover</h4>
<pre>public&nbsp;void&nbsp;recover(<a href="../../../../org/xflatdb/xflat/db/XFlatDatabase.html" title="class in org.xflatdb.xflat.db">XFlatDatabase</a>&nbsp;db)</pre>
<div class="block"><strong>Description copied from class:&nbsp;<code><a href="../../../../org/xflatdb/xflat/db/EngineTransactionManager.html#recover(org.xflatdb.xflat.db.XFlatDatabase)">EngineTransactionManager</a></code></strong></div>
<div class="block">Attempts to recover from an unexpected shutdown if necessary.  The
 transaction manager ought to use journaling so that it can revert partially-
 committed transactions here.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../../org/xflatdb/xflat/db/EngineTransactionManager.html#recover(org.xflatdb.xflat.db.XFlatDatabase)">recover</a></code>&nbsp;in class&nbsp;<code><a href="../../../../org/xflatdb/xflat/db/EngineTransactionManager.html" title="class in org.xflatdb.xflat.db">EngineTransactionManager</a></code></dd>
<dt><span class="strong">Parameters:</span></dt><dd><code>db</code> - The database that initiated the recovery.  It is used to spin
 up the tables that any partially-committed transactions were bound to.</dd></dl>
</li>
</ul>
<a name="isCommitInProgress(long)">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>isCommitInProgress</h4>
<pre>public&nbsp;boolean&nbsp;isCommitInProgress(long&nbsp;transactionId)</pre>
<div class="block"><strong>Description copied from class:&nbsp;<code><a href="../../../../org/xflatdb/xflat/db/EngineTransactionManager.html#isCommitInProgress(long)">EngineTransactionManager</a></code></strong></div>
<div class="block">Checks to see if the given transaction ID is not yet finished committing.
 <p/>
 If true, then the transaction has a commit ID assigned and some rows may
 be marked with that commit ID, but <a href="../../../../org/xflatdb/xflat/transaction/Transaction.html#isCommitted()"><code>Transaction.isCommitted()</code></a>
 will be false.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../../org/xflatdb/xflat/db/EngineTransactionManager.html#isCommitInProgress(long)">isCommitInProgress</a></code>&nbsp;in class&nbsp;<code><a href="../../../../org/xflatdb/xflat/db/EngineTransactionManager.html" title="class in org.xflatdb.xflat.db">EngineTransactionManager</a></code></dd>
<dt><span class="strong">Parameters:</span></dt><dd><code>transactionId</code> - The ID of the transaction to check.</dd>
<dt><span class="strong">Returns:</span></dt><dd>true if the transaction has begun committing but is not yet finished.</dd></dl>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar_bottom">
<!--   -->
</a><a href="#skip-navbar_bottom" title="Skip navigation links"></a><a name="navbar_bottom_firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/ThreadContextTransactionManager.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../index-all.html">Index</a></li>
<li><a href="../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../org/xflatdb/xflat/transaction/Propagation.html" title="enum in org.xflatdb.xflat.transaction"><span class="strong">Prev Class</span></a></li>
<li><a href="../../../../org/xflatdb/xflat/transaction/ThreadContextTransactionManager.AmbientThreadedTransactionScope.html" title="class in org.xflatdb.xflat.transaction"><span class="strong">Next Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../index.html?org/xflatdb/xflat/transaction/ThreadContextTransactionManager.html" target="_top">Frames</a></li>
<li><a href="ThreadContextTransactionManager.html" target="_top">No Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../../allclasses-noframe.html">All Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li><a href="#nested_class_summary">Nested</a>&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor_summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor_detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_detail">Method</a></li>
</ul>
</div>
<a name="skip-navbar_bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
<p class="legalCopy"><small>Copyright &#169; 2014 <a href="http://xflatdb.org/">XFlat</a>. All rights reserved.</small></p>
</body>
</html>
