<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (version 1.7.0_10) on Fri Feb 15 00:43:44 CST 2013 -->
<meta http-equiv="Content-Type" content="text/html" charset="UTF-8">
<title>CachedDocumentEngine</title>
<meta name="date" content="2013-02-15">
<link rel="stylesheet" type="text/css" href="../../../../stylesheet.css" title="Style">
</head>
<body>
<script type="text/javascript"><!--
    if (location.href.indexOf('is-external=true') == -1) {
        parent.document.title="CachedDocumentEngine";
    }
//-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar_top">
<!--   -->
</a><a href="#skip-navbar_top" title="Skip navigation links"></a><a name="navbar_top_firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/CachedDocumentEngine.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../index-files/index-1.html">Index</a></li>
<li><a href="../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li>Prev Class</li>
<li><a href="../../../../org/xflatdb/xflat/engine/DefaultEngineFactory.html" title="class in org.xflatdb.xflat.engine"><span class="strong">Next Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../index.html?org/xflatdb/xflat/engine/CachedDocumentEngine.html" target="_top">Frames</a></li>
<li><a href="CachedDocumentEngine.html" target="_top">No Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../../allclasses-noframe.html">All Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li><a href="#nested_classes_inherited_from_class_org.xflatdb.xflat.db.EngineBase">Nested</a>&nbsp;|&nbsp;</li>
<li><a href="#fields_inherited_from_class_org.xflatdb.xflat.db.EngineBase">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor_summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor_detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_detail">Method</a></li>
</ul>
</div>
<a name="skip-navbar_top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">org.xflatdb.xflat.engine</div>
<h2 title="Class CachedDocumentEngine" class="title">Class CachedDocumentEngine</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li>java.lang.Object</li>
<li>
<ul class="inheritance">
<li><a href="../../../../org/xflatdb/xflat/db/EngineBase.html" title="class in org.xflatdb.xflat.db">org.xflatdb.xflat.db.EngineBase</a></li>
<li>
<ul class="inheritance">
<li>org.xflatdb.xflat.engine.CachedDocumentEngine</li>
</ul>
</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<dl>
<dt>All Implemented Interfaces:</dt>
<dd><a href="../../../../org/xflatdb/xflat/db/Engine.html" title="interface in org.xflatdb.xflat.db">Engine</a></dd>
</dl>
<hr>
<br>
<pre>public class <span class="strong">CachedDocumentEngine</span>
extends <a href="../../../../org/xflatdb/xflat/db/EngineBase.html" title="class in org.xflatdb.xflat.db">EngineBase</a>
implements <a href="../../../../org/xflatdb/xflat/db/Engine.html" title="interface in org.xflatdb.xflat.db">Engine</a></pre>
<div class="block">This is an engine that caches the entire table in memory as a JDOM <code>Document</code>.</div>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- ======== NESTED CLASS SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="nested_class_summary">
<!--   -->
</a>
<h3>Nested Class Summary</h3>
<ul class="blockList">
<li class="blockList"><a name="nested_classes_inherited_from_class_org.xflatdb.xflat.db.EngineBase">
<!--   -->
</a>
<h3>Nested classes/interfaces inherited from class&nbsp;org.xflatdb.xflat.db.<a href="../../../../org/xflatdb/xflat/db/EngineBase.html" title="class in org.xflatdb.xflat.db">EngineBase</a></h3>
<code><a href="../../../../org/xflatdb/xflat/db/EngineBase.Row.html" title="class in org.xflatdb.xflat.db">EngineBase.Row</a>, <a href="../../../../org/xflatdb/xflat/db/EngineBase.RowData.html" title="class in org.xflatdb.xflat.db">EngineBase.RowData</a>, <a href="../../../../org/xflatdb/xflat/db/EngineBase.SpinDownEvent.html" title="class in org.xflatdb.xflat.db">EngineBase.SpinDownEvent</a>, <a href="../../../../org/xflatdb/xflat/db/EngineBase.SpinDownEventHandler.html" title="interface in org.xflatdb.xflat.db">EngineBase.SpinDownEventHandler</a></code></li>
</ul>
</li>
</ul>
<!-- =========== FIELD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="field_summary">
<!--   -->
</a>
<h3>Field Summary</h3>
<ul class="blockList">
<li class="blockList"><a name="fields_inherited_from_class_org.xflatdb.xflat.db.EngineBase">
<!--   -->
</a>
<h3>Fields inherited from class&nbsp;org.xflatdb.xflat.db.<a href="../../../../org/xflatdb/xflat/db/EngineBase.html" title="class in org.xflatdb.xflat.db">EngineBase</a></h3>
<code><a href="../../../../org/xflatdb/xflat/db/EngineBase.html#log">log</a>, <a href="../../../../org/xflatdb/xflat/db/EngineBase.html#state">state</a></code></li>
</ul>
</li>
</ul>
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor_summary">
<!--   -->
</a>
<h3>Constructor Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Constructor Summary table, listing constructors, and an explanation">
<caption><span>Constructors</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colOne" scope="col">Constructor and Description</th>
</tr>
<tr class="altColor">
<td class="colOne"><code><strong><a href="../../../../org/xflatdb/xflat/engine/CachedDocumentEngine.html#CachedDocumentEngine(org.xflatdb.xflat.util.DocumentFileWrapper, java.lang.String)">CachedDocumentEngine</a></strong>(<a href="../../../../org/xflatdb/xflat/util/DocumentFileWrapper.html" title="class in org.xflatdb.xflat.util">DocumentFileWrapper</a>&nbsp;file,
                    java.lang.String&nbsp;tableName)</code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colOne"><code><strong><a href="../../../../org/xflatdb/xflat/engine/CachedDocumentEngine.html#CachedDocumentEngine(java.io.File, java.lang.String)">CachedDocumentEngine</a></strong>(java.io.File&nbsp;file,
                    java.lang.String&nbsp;tableName)</code>&nbsp;</td>
</tr>
</table>
</li>
</ul>
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method_summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span>Methods</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected boolean</code></td>
<td class="colLast"><code><strong><a href="../../../../org/xflatdb/xflat/engine/CachedDocumentEngine.html#beginOperations()">beginOperations</a></strong>()</code>
<div class="block">Instructs the engine to begin full read/write operations.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../org/xflatdb/xflat/engine/CachedDocumentEngine.html#commit(org.xflatdb.xflat.transaction.Transaction, org.xflatdb.xflat.transaction.TransactionOptions)">commit</a></strong>(<a href="../../../../org/xflatdb/xflat/transaction/Transaction.html" title="interface in org.xflatdb.xflat.transaction">Transaction</a>&nbsp;tx,
      <a href="../../../../org/xflatdb/xflat/transaction/TransactionOptions.html" title="class in org.xflatdb.xflat.transaction">TransactionOptions</a>&nbsp;options)</code>
<div class="block">Called when a transaction is committed to write the committed data to disk.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><strong><a href="../../../../org/xflatdb/xflat/engine/CachedDocumentEngine.html#deleteAll(org.xflatdb.xflat.query.XPathQuery)">deleteAll</a></strong>(<a href="../../../../org/xflatdb/xflat/query/XPathQuery.html" title="class in org.xflatdb.xflat.query">XPathQuery</a>&nbsp;query)</code>
<div class="block">Deletes all rows matching the given query.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../org/xflatdb/xflat/engine/CachedDocumentEngine.html#deleteRow(java.lang.String)">deleteRow</a></strong>(java.lang.String&nbsp;id)</code>
<div class="block">Deletes the given row.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected <a href="../../../../org/xflatdb/xflat/transaction/Transaction.html" title="interface in org.xflatdb.xflat.transaction">Transaction</a></code></td>
<td class="colLast"><code><strong><a href="../../../../org/xflatdb/xflat/engine/CachedDocumentEngine.html#ensureWriteReady()">ensureWriteReady</a></strong>()</code>
<div class="block">Overrides ensureWriteReady to additionally check if the 
 engine has fully finished spinning up</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><strong><a href="../../../../org/xflatdb/xflat/engine/CachedDocumentEngine.html#forceSpinDown()">forceSpinDown</a></strong>()</code>
<div class="block">Forces this engine to immediately release all resources, even if there are
 still outstanding cursors or uncommitted data.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code><a href="../../../../org/xflatdb/xflat/util/DocumentFileWrapper.html" title="class in org.xflatdb.xflat.util">DocumentFileWrapper</a></code></td>
<td class="colLast"><code><strong><a href="../../../../org/xflatdb/xflat/engine/CachedDocumentEngine.html#getFile()">getFile</a></strong>()</code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>protected boolean</code></td>
<td class="colLast"><code><strong><a href="../../../../org/xflatdb/xflat/engine/CachedDocumentEngine.html#hasUncomittedData()">hasUncomittedData</a></strong>()</code>
<div class="block">Checks whether this engine has any transactional updates in an uncommitted 
 or unreverted state.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../org/xflatdb/xflat/engine/CachedDocumentEngine.html#insertRow(java.lang.String, org.jdom2.Element)">insertRow</a></strong>(java.lang.String&nbsp;id,
         org.jdom2.Element&nbsp;data)</code>
<div class="block">Inserts the given data element into a row.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code><a href="../../../../org/xflatdb/xflat/Cursor.html" title="interface in org.xflatdb.xflat">Cursor</a>&lt;org.jdom2.Element&gt;</code></td>
<td class="colLast"><code><strong><a href="../../../../org/xflatdb/xflat/engine/CachedDocumentEngine.html#queryTable(org.xflatdb.xflat.query.XPathQuery)">queryTable</a></strong>(<a href="../../../../org/xflatdb/xflat/query/XPathQuery.html" title="class in org.xflatdb.xflat.query">XPathQuery</a>&nbsp;query)</code>
<div class="block">Returns a cursor over the rows in the table matching the given
 query.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>org.jdom2.Element</code></td>
<td class="colLast"><code><strong><a href="../../../../org/xflatdb/xflat/engine/CachedDocumentEngine.html#readRow(java.lang.String)">readRow</a></strong>(java.lang.String&nbsp;id)</code>
<div class="block">Reads a row from the database, if it exists.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../org/xflatdb/xflat/engine/CachedDocumentEngine.html#replaceRow(java.lang.String, org.jdom2.Element)">replaceRow</a></strong>(java.lang.String&nbsp;id,
          org.jdom2.Element&nbsp;data)</code>
<div class="block">Updates the given row by replacing the data with the new element.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../org/xflatdb/xflat/engine/CachedDocumentEngine.html#revert(long, boolean)">revert</a></strong>(long&nbsp;txId,
      boolean&nbsp;isRecovering)</code>
<div class="block">Called when a transaction is committed to revert the given transaction ID.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>protected boolean</code></td>
<td class="colLast"><code><strong><a href="../../../../org/xflatdb/xflat/engine/CachedDocumentEngine.html#spinDown(org.xflatdb.xflat.db.EngineBase.SpinDownEventHandler)">spinDown</a></strong>(<a href="../../../../org/xflatdb/xflat/db/EngineBase.SpinDownEventHandler.html" title="interface in org.xflatdb.xflat.db">EngineBase.SpinDownEventHandler</a>&nbsp;completionEventHandler)</code>
<div class="block">Instructs this Engine to wrap up its operations in preparation for being
 switched out.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected boolean</code></td>
<td class="colLast"><code><strong><a href="../../../../org/xflatdb/xflat/engine/CachedDocumentEngine.html#spinUp()">spinUp</a></strong>()</code>
<div class="block">Initializes the engine and instructs it to begin acquiring the resources
 necessary to function.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><strong><a href="../../../../org/xflatdb/xflat/engine/CachedDocumentEngine.html#update(java.lang.String, org.xflatdb.xflat.query.XPathUpdate)">update</a></strong>(java.lang.String&nbsp;id,
      <a href="../../../../org/xflatdb/xflat/query/XPathUpdate.html" title="class in org.xflatdb.xflat.query">XPathUpdate</a>&nbsp;update)</code>
<div class="block">Applies an update to the one row specified by the ID.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><strong><a href="../../../../org/xflatdb/xflat/engine/CachedDocumentEngine.html#update(org.xflatdb.xflat.query.XPathQuery, org.xflatdb.xflat.query.XPathUpdate)">update</a></strong>(<a href="../../../../org/xflatdb/xflat/query/XPathQuery.html" title="class in org.xflatdb.xflat.query">XPathQuery</a>&nbsp;query,
      <a href="../../../../org/xflatdb/xflat/query/XPathUpdate.html" title="class in org.xflatdb.xflat.query">XPathUpdate</a>&nbsp;update)</code>
<div class="block">Applies the given update to all rows matching the query.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><strong><a href="../../../../org/xflatdb/xflat/engine/CachedDocumentEngine.html#upsertRow(java.lang.String, org.jdom2.Element)">upsertRow</a></strong>(java.lang.String&nbsp;id,
         org.jdom2.Element&nbsp;data)</code>
<div class="block">Updates or inserts the given row.</div>
</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="methods_inherited_from_class_org.xflatdb.xflat.db.EngineBase">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;org.xflatdb.xflat.db.<a href="../../../../org/xflatdb/xflat/db/EngineBase.html" title="class in org.xflatdb.xflat.db">EngineBase</a></h3>
<code><a href="../../../../org/xflatdb/xflat/db/EngineBase.html#getConversionService()">getConversionService</a>, <a href="../../../../org/xflatdb/xflat/db/EngineBase.html#getExecutorService()">getExecutorService</a>, <a href="../../../../org/xflatdb/xflat/db/EngineBase.html#getId(org.jdom2.Element)">getId</a>, <a href="../../../../org/xflatdb/xflat/db/EngineBase.html#getLastActivity()">getLastActivity</a>, <a href="../../../../org/xflatdb/xflat/db/EngineBase.html#getState()">getState</a>, <a href="../../../../org/xflatdb/xflat/db/EngineBase.html#getTableLock()">getTableLock</a>, <a href="../../../../org/xflatdb/xflat/db/EngineBase.html#getTableName()">getTableName</a>, <a href="../../../../org/xflatdb/xflat/db/EngineBase.html#getTransactionManager()">getTransactionManager</a>, <a href="../../../../org/xflatdb/xflat/db/EngineBase.html#loadMetadata(org.jdom2.Element)">loadMetadata</a>, <a href="../../../../org/xflatdb/xflat/db/EngineBase.html#releaseTableLock()">releaseTableLock</a>, <a href="../../../../org/xflatdb/xflat/db/EngineBase.html#saveMetadata(org.jdom2.Element)">saveMetadata</a>, <a href="../../../../org/xflatdb/xflat/db/EngineBase.html#setConversionService(org.xflatdb.xflat.convert.ConversionService)">setConversionService</a>, <a href="../../../../org/xflatdb/xflat/db/EngineBase.html#setExecutorService(java.util.concurrent.ScheduledExecutorService)">setExecutorService</a>, <a href="../../../../org/xflatdb/xflat/db/EngineBase.html#setId(org.jdom2.Element, java.lang.String)">setId</a>, <a href="../../../../org/xflatdb/xflat/db/EngineBase.html#setLastActivity(long)">setLastActivity</a>, <a href="../../../../org/xflatdb/xflat/db/EngineBase.html#setTransactionManager(org.xflatdb.xflat.db.EngineTransactionManager)">setTransactionManager</a>, <a href="../../../../org/xflatdb/xflat/db/EngineBase.html#writeComplete()">writeComplete</a></code></li>
</ul>
<ul class="blockList">
<li class="blockList"><a name="methods_inherited_from_class_java.lang.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.Object</h3>
<code>clone, equals, finalize, getClass, hashCode, notify, notifyAll, toString, wait, wait, wait</code></li>
</ul>
<ul class="blockList">
<li class="blockList"><a name="methods_inherited_from_class_org.xflatdb.xflat.db.Engine">
<!--   -->
</a>
<h3>Methods inherited from interface&nbsp;org.xflatdb.xflat.db.<a href="../../../../org/xflatdb/xflat/db/Engine.html" title="interface in org.xflatdb.xflat.db">Engine</a></h3>
<code><a href="../../../../org/xflatdb/xflat/db/Engine.html#getTableName()">getTableName</a></code></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor_detail">
<!--   -->
</a>
<h3>Constructor Detail</h3>
<a name="CachedDocumentEngine(java.io.File, java.lang.String)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>CachedDocumentEngine</h4>
<pre>public&nbsp;CachedDocumentEngine(java.io.File&nbsp;file,
                    java.lang.String&nbsp;tableName)</pre>
</li>
</ul>
<a name="CachedDocumentEngine(org.xflatdb.xflat.util.DocumentFileWrapper, java.lang.String)">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>CachedDocumentEngine</h4>
<pre>public&nbsp;CachedDocumentEngine(<a href="../../../../org/xflatdb/xflat/util/DocumentFileWrapper.html" title="class in org.xflatdb.xflat.util">DocumentFileWrapper</a>&nbsp;file,
                    java.lang.String&nbsp;tableName)</pre>
</li>
</ul>
</li>
</ul>
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method_detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="getFile()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getFile</h4>
<pre>public&nbsp;<a href="../../../../org/xflatdb/xflat/util/DocumentFileWrapper.html" title="class in org.xflatdb.xflat.util">DocumentFileWrapper</a>&nbsp;getFile()</pre>
</li>
</ul>
<a name="insertRow(java.lang.String, org.jdom2.Element)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>insertRow</h4>
<pre>public&nbsp;void&nbsp;insertRow(java.lang.String&nbsp;id,
             org.jdom2.Element&nbsp;data)
               throws <a href="../../../../org/xflatdb/xflat/DuplicateKeyException.html" title="class in org.xflatdb.xflat">DuplicateKeyException</a></pre>
<div class="block"><strong>Description copied from interface:&nbsp;<code><a href="../../../../org/xflatdb/xflat/db/Engine.html#insertRow(java.lang.String, org.jdom2.Element)">Engine</a></code></strong></div>
<div class="block">Inserts the given data element into a row.  The data element
 is associated to a unique ID.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../../org/xflatdb/xflat/db/Engine.html#insertRow(java.lang.String, org.jdom2.Element)">insertRow</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../org/xflatdb/xflat/db/Engine.html" title="interface in org.xflatdb.xflat.db">Engine</a></code></dd>
<dt><span class="strong">Parameters:</span></dt><dd><code>id</code> - The unique Id of the row to insert.</dd><dd><code>data</code> - The XML data to insert as a row.</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="../../../../org/xflatdb/xflat/DuplicateKeyException.html" title="class in org.xflatdb.xflat">DuplicateKeyException</a></code> - if the row already exists.
 for the given Id.</dd></dl>
</li>
</ul>
<a name="readRow(java.lang.String)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>readRow</h4>
<pre>public&nbsp;org.jdom2.Element&nbsp;readRow(java.lang.String&nbsp;id)</pre>
<div class="block"><strong>Description copied from interface:&nbsp;<code><a href="../../../../org/xflatdb/xflat/db/Engine.html#readRow(java.lang.String)">Engine</a></code></strong></div>
<div class="block">Reads a row from the database, if it exists.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../../org/xflatdb/xflat/db/Engine.html#readRow(java.lang.String)">readRow</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../org/xflatdb/xflat/db/Engine.html" title="interface in org.xflatdb.xflat.db">Engine</a></code></dd>
<dt><span class="strong">Parameters:</span></dt><dd><code>id</code> - The Id of the row to read.</dd>
<dt><span class="strong">Returns:</span></dt><dd>The data in the row, or null if no element exists with that Id.</dd></dl>
</li>
</ul>
<a name="queryTable(org.xflatdb.xflat.query.XPathQuery)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>queryTable</h4>
<pre>public&nbsp;<a href="../../../../org/xflatdb/xflat/Cursor.html" title="interface in org.xflatdb.xflat">Cursor</a>&lt;org.jdom2.Element&gt;&nbsp;queryTable(<a href="../../../../org/xflatdb/xflat/query/XPathQuery.html" title="class in org.xflatdb.xflat.query">XPathQuery</a>&nbsp;query)</pre>
<div class="block"><strong>Description copied from interface:&nbsp;<code><a href="../../../../org/xflatdb/xflat/db/Engine.html#queryTable(org.xflatdb.xflat.query.XPathQuery)">Engine</a></code></strong></div>
<div class="block">Returns a cursor over the rows in the table matching the given
 query.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../../org/xflatdb/xflat/db/Engine.html#queryTable(org.xflatdb.xflat.query.XPathQuery)">queryTable</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../org/xflatdb/xflat/db/Engine.html" title="interface in org.xflatdb.xflat.db">Engine</a></code></dd>
<dt><span class="strong">Parameters:</span></dt><dd><code>query</code> - The XPath query selecting rows in the database.</dd>
<dt><span class="strong">Returns:</span></dt><dd>A cursor iterating over each data element in each row.</dd></dl>
</li>
</ul>
<a name="replaceRow(java.lang.String, org.jdom2.Element)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>replaceRow</h4>
<pre>public&nbsp;void&nbsp;replaceRow(java.lang.String&nbsp;id,
              org.jdom2.Element&nbsp;data)
                throws <a href="../../../../org/xflatdb/xflat/KeyNotFoundException.html" title="class in org.xflatdb.xflat">KeyNotFoundException</a></pre>
<div class="block"><strong>Description copied from interface:&nbsp;<code><a href="../../../../org/xflatdb/xflat/db/Engine.html#replaceRow(java.lang.String, org.jdom2.Element)">Engine</a></code></strong></div>
<div class="block">Updates the given row by replacing the data with the new element.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../../org/xflatdb/xflat/db/Engine.html#replaceRow(java.lang.String, org.jdom2.Element)">replaceRow</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../org/xflatdb/xflat/db/Engine.html" title="interface in org.xflatdb.xflat.db">Engine</a></code></dd>
<dt><span class="strong">Parameters:</span></dt><dd><code>id</code> - The unique ID of the row to update.</dd><dd><code>data</code> - The data that replaces the old data.</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="../../../../org/xflatdb/xflat/KeyNotFoundException.html" title="class in org.xflatdb.xflat">KeyNotFoundException</a></code> - if the row does not exist.</dd></dl>
</li>
</ul>
<a name="update(java.lang.String, org.xflatdb.xflat.query.XPathUpdate)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>update</h4>
<pre>public&nbsp;boolean&nbsp;update(java.lang.String&nbsp;id,
             <a href="../../../../org/xflatdb/xflat/query/XPathUpdate.html" title="class in org.xflatdb.xflat.query">XPathUpdate</a>&nbsp;update)
               throws <a href="../../../../org/xflatdb/xflat/KeyNotFoundException.html" title="class in org.xflatdb.xflat">KeyNotFoundException</a></pre>
<div class="block"><strong>Description copied from interface:&nbsp;<code><a href="../../../../org/xflatdb/xflat/db/Engine.html#update(java.lang.String, org.xflatdb.xflat.query.XPathUpdate)">Engine</a></code></strong></div>
<div class="block">Applies an update to the one row specified by the ID.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../../org/xflatdb/xflat/db/Engine.html#update(java.lang.String, org.xflatdb.xflat.query.XPathUpdate)">update</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../org/xflatdb/xflat/db/Engine.html" title="interface in org.xflatdb.xflat.db">Engine</a></code></dd>
<dt><span class="strong">Parameters:</span></dt><dd><code>id</code> - The ID of the row to update.</dd><dd><code>update</code> - The update to apply.</dd>
<dt><span class="strong">Returns:</span></dt><dd>true if the update actually applied.</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="../../../../org/xflatdb/xflat/KeyNotFoundException.html" title="class in org.xflatdb.xflat">KeyNotFoundException</a></code></dd></dl>
</li>
</ul>
<a name="update(org.xflatdb.xflat.query.XPathQuery, org.xflatdb.xflat.query.XPathUpdate)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>update</h4>
<pre>public&nbsp;int&nbsp;update(<a href="../../../../org/xflatdb/xflat/query/XPathQuery.html" title="class in org.xflatdb.xflat.query">XPathQuery</a>&nbsp;query,
         <a href="../../../../org/xflatdb/xflat/query/XPathUpdate.html" title="class in org.xflatdb.xflat.query">XPathUpdate</a>&nbsp;update)</pre>
<div class="block"><strong>Description copied from interface:&nbsp;<code><a href="../../../../org/xflatdb/xflat/db/Engine.html#update(org.xflatdb.xflat.query.XPathQuery, org.xflatdb.xflat.query.XPathUpdate)">Engine</a></code></strong></div>
<div class="block">Applies the given update to all rows matching the query.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../../org/xflatdb/xflat/db/Engine.html#update(org.xflatdb.xflat.query.XPathQuery, org.xflatdb.xflat.query.XPathUpdate)">update</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../org/xflatdb/xflat/db/Engine.html" title="interface in org.xflatdb.xflat.db">Engine</a></code></dd>
<dt><span class="strong">Parameters:</span></dt><dd><code>query</code> - The query to match.</dd><dd><code>update</code> - The update to apply.</dd>
<dt><span class="strong">Returns:</span></dt><dd>the number of rows that were updated</dd></dl>
</li>
</ul>
<a name="upsertRow(java.lang.String, org.jdom2.Element)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>upsertRow</h4>
<pre>public&nbsp;boolean&nbsp;upsertRow(java.lang.String&nbsp;id,
                org.jdom2.Element&nbsp;data)</pre>
<div class="block"><strong>Description copied from interface:&nbsp;<code><a href="../../../../org/xflatdb/xflat/db/Engine.html#upsertRow(java.lang.String, org.jdom2.Element)">Engine</a></code></strong></div>
<div class="block">Updates or inserts the given row.  If the row exists,
 the row is replaced with the new data.  If the row does not exist,
 the row is inserted.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../../org/xflatdb/xflat/db/Engine.html#upsertRow(java.lang.String, org.jdom2.Element)">upsertRow</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../org/xflatdb/xflat/db/Engine.html" title="interface in org.xflatdb.xflat.db">Engine</a></code></dd>
<dt><span class="strong">Parameters:</span></dt><dd><code>id</code> - The Id of the row to upsert.</dd><dd><code>data</code> - The data to replace or insert.</dd>
<dt><span class="strong">Returns:</span></dt><dd>false if an existing row was updated, true if a row was inserted.</dd></dl>
</li>
</ul>
<a name="deleteRow(java.lang.String)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>deleteRow</h4>
<pre>public&nbsp;void&nbsp;deleteRow(java.lang.String&nbsp;id)
               throws <a href="../../../../org/xflatdb/xflat/KeyNotFoundException.html" title="class in org.xflatdb.xflat">KeyNotFoundException</a></pre>
<div class="block"><strong>Description copied from interface:&nbsp;<code><a href="../../../../org/xflatdb/xflat/db/Engine.html#deleteRow(java.lang.String)">Engine</a></code></strong></div>
<div class="block">Deletes the given row.  The row is removed from the table.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../../org/xflatdb/xflat/db/Engine.html#deleteRow(java.lang.String)">deleteRow</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../org/xflatdb/xflat/db/Engine.html" title="interface in org.xflatdb.xflat.db">Engine</a></code></dd>
<dt><span class="strong">Parameters:</span></dt><dd><code>id</code> - The ID of the row to delete.</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="../../../../org/xflatdb/xflat/KeyNotFoundException.html" title="class in org.xflatdb.xflat">KeyNotFoundException</a></code></dd></dl>
</li>
</ul>
<a name="deleteAll(org.xflatdb.xflat.query.XPathQuery)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>deleteAll</h4>
<pre>public&nbsp;int&nbsp;deleteAll(<a href="../../../../org/xflatdb/xflat/query/XPathQuery.html" title="class in org.xflatdb.xflat.query">XPathQuery</a>&nbsp;query)</pre>
<div class="block"><strong>Description copied from interface:&nbsp;<code><a href="../../../../org/xflatdb/xflat/db/Engine.html#deleteAll(org.xflatdb.xflat.query.XPathQuery)">Engine</a></code></strong></div>
<div class="block">Deletes all rows matching the given query.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../../org/xflatdb/xflat/db/Engine.html#deleteAll(org.xflatdb.xflat.query.XPathQuery)">deleteAll</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../org/xflatdb/xflat/db/Engine.html" title="interface in org.xflatdb.xflat.db">Engine</a></code></dd>
<dt><span class="strong">Parameters:</span></dt><dd><code>query</code> - The query that matches database rows.</dd>
<dt><span class="strong">Returns:</span></dt><dd>the number of rows that were deleted.</dd></dl>
</li>
</ul>
<a name="commit(org.xflatdb.xflat.transaction.Transaction, org.xflatdb.xflat.transaction.TransactionOptions)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>commit</h4>
<pre>public&nbsp;void&nbsp;commit(<a href="../../../../org/xflatdb/xflat/transaction/Transaction.html" title="interface in org.xflatdb.xflat.transaction">Transaction</a>&nbsp;tx,
          <a href="../../../../org/xflatdb/xflat/transaction/TransactionOptions.html" title="class in org.xflatdb.xflat.transaction">TransactionOptions</a>&nbsp;options)</pre>
<div class="block"><strong>Description copied from class:&nbsp;<code><a href="../../../../org/xflatdb/xflat/db/EngineBase.html#commit(org.xflatdb.xflat.transaction.Transaction, org.xflatdb.xflat.transaction.TransactionOptions)">EngineBase</a></code></strong></div>
<div class="block">Called when a transaction is committed to write the committed data to disk.
 After this method returns, the data should be stored in non-volatile storage.</div>
<dl>
<dt><strong>Overrides:</strong></dt>
<dd><code><a href="../../../../org/xflatdb/xflat/db/EngineBase.html#commit(org.xflatdb.xflat.transaction.Transaction, org.xflatdb.xflat.transaction.TransactionOptions)">commit</a></code>&nbsp;in class&nbsp;<code><a href="../../../../org/xflatdb/xflat/db/EngineBase.html" title="class in org.xflatdb.xflat.db">EngineBase</a></code></dd>
</dl>
</li>
</ul>
<a name="revert(long, boolean)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>revert</h4>
<pre>public&nbsp;void&nbsp;revert(long&nbsp;txId,
          boolean&nbsp;isRecovering)</pre>
<div class="block"><strong>Description copied from class:&nbsp;<code><a href="../../../../org/xflatdb/xflat/db/EngineBase.html#revert(long, boolean)">EngineBase</a></code></strong></div>
<div class="block">Called when a transaction is committed to revert the given transaction ID.
 This may be called even if a transaction was previously committed in this engine,
 because it was not fully committed across all engines.</div>
<dl>
<dt><strong>Overrides:</strong></dt>
<dd><code><a href="../../../../org/xflatdb/xflat/db/EngineBase.html#revert(long, boolean)">revert</a></code>&nbsp;in class&nbsp;<code><a href="../../../../org/xflatdb/xflat/db/EngineBase.html" title="class in org.xflatdb.xflat.db">EngineBase</a></code></dd>
<dd><code>isRecovering</code> - true if this transaction is being reverted during recovery
 at startup.</dd></dl>
</li>
</ul>
<a name="spinUp()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>spinUp</h4>
<pre>protected&nbsp;boolean&nbsp;spinUp()</pre>
<div class="block"><strong>Description copied from class:&nbsp;<code><a href="../../../../org/xflatdb/xflat/db/EngineBase.html#spinUp()">EngineBase</a></code></strong></div>
<div class="block">Initializes the engine and instructs it to begin acquiring the resources
 necessary to function.  At this point the engine may begin to respond to
 read-only requests, but any write requests MUST block until <a href="../../../../org/xflatdb/xflat/db/EngineBase.html#beginOperations()"><code>EngineBase.beginOperations()</code></a> )
 is called.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../../org/xflatdb/xflat/db/EngineBase.html#spinUp()">spinUp</a></code>&nbsp;in class&nbsp;<code><a href="../../../../org/xflatdb/xflat/db/EngineBase.html" title="class in org.xflatdb.xflat.db">EngineBase</a></code></dd>
</dl>
</li>
</ul>
<a name="beginOperations()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>beginOperations</h4>
<pre>protected&nbsp;boolean&nbsp;beginOperations()</pre>
<div class="block"><strong>Description copied from class:&nbsp;<code><a href="../../../../org/xflatdb/xflat/db/EngineBase.html#beginOperations()">EngineBase</a></code></strong></div>
<div class="block">Instructs the engine to begin full read/write operations.  At this point this
 engine has full control over the data files.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../../org/xflatdb/xflat/db/EngineBase.html#beginOperations()">beginOperations</a></code>&nbsp;in class&nbsp;<code><a href="../../../../org/xflatdb/xflat/db/EngineBase.html" title="class in org.xflatdb.xflat.db">EngineBase</a></code></dd>
</dl>
</li>
</ul>
<a name="ensureWriteReady()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>ensureWriteReady</h4>
<pre>protected&nbsp;<a href="../../../../org/xflatdb/xflat/transaction/Transaction.html" title="interface in org.xflatdb.xflat.transaction">Transaction</a>&nbsp;ensureWriteReady()</pre>
<div class="block">Overrides ensureWriteReady to additionally check if the 
 engine has fully finished spinning up</div>
<dl>
<dt><strong>Overrides:</strong></dt>
<dd><code><a href="../../../../org/xflatdb/xflat/db/EngineBase.html#ensureWriteReady()">ensureWriteReady</a></code>&nbsp;in class&nbsp;<code><a href="../../../../org/xflatdb/xflat/db/EngineBase.html" title="class in org.xflatdb.xflat.db">EngineBase</a></code></dd>
</dl>
</li>
</ul>
<a name="spinDown(org.xflatdb.xflat.db.EngineBase.SpinDownEventHandler)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>spinDown</h4>
<pre>protected&nbsp;boolean&nbsp;spinDown(<a href="../../../../org/xflatdb/xflat/db/EngineBase.SpinDownEventHandler.html" title="interface in org.xflatdb.xflat.db">EngineBase.SpinDownEventHandler</a>&nbsp;completionEventHandler)</pre>
<div class="block"><strong>Description copied from class:&nbsp;<code><a href="../../../../org/xflatdb/xflat/db/EngineBase.html#spinDown(org.xflatdb.xflat.db.EngineBase.SpinDownEventHandler)">EngineBase</a></code></strong></div>
<div class="block">Instructs this Engine to wrap up its operations in preparation for being
 switched out.  The engine must be set to read-only mode (write operations
 should throw an exception).  The engine can stay alive until its outstanding
 cursors are closed, but must allow concurrent reads of the file.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../../org/xflatdb/xflat/db/EngineBase.html#spinDown(org.xflatdb.xflat.db.EngineBase.SpinDownEventHandler)">spinDown</a></code>&nbsp;in class&nbsp;<code><a href="../../../../org/xflatdb/xflat/db/EngineBase.html" title="class in org.xflatdb.xflat.db">EngineBase</a></code></dd>
<dt><span class="strong">Parameters:</span></dt><dd><code>completionEventHandler</code> - An event handler that is notified when
 the Engine has finished spinning down.</dd></dl>
</li>
</ul>
<a name="forceSpinDown()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>forceSpinDown</h4>
<pre>public&nbsp;boolean&nbsp;forceSpinDown()</pre>
<div class="block"><strong>Description copied from class:&nbsp;<code><a href="../../../../org/xflatdb/xflat/db/EngineBase.html#forceSpinDown()">EngineBase</a></code></strong></div>
<div class="block">Forces this engine to immediately release all resources, even if there are
 still outstanding cursors or uncommitted data.  Cursors that continue iterating will throw an
 exception that indicates the engine has spun down.  This will be called after a normal
 spin down, or in case of some kind of error to reclaim resources.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../../org/xflatdb/xflat/db/EngineBase.html#forceSpinDown()">forceSpinDown</a></code>&nbsp;in class&nbsp;<code><a href="../../../../org/xflatdb/xflat/db/EngineBase.html" title="class in org.xflatdb.xflat.db">EngineBase</a></code></dd>
</dl>
</li>
</ul>
<a name="hasUncomittedData()">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>hasUncomittedData</h4>
<pre>protected&nbsp;boolean&nbsp;hasUncomittedData()</pre>
<div class="block"><strong>Description copied from class:&nbsp;<code><a href="../../../../org/xflatdb/xflat/db/EngineBase.html#hasUncomittedData()">EngineBase</a></code></strong></div>
<div class="block">Checks whether this engine has any transactional updates in an uncommitted 
 or unreverted state.
 If so, returns true.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../../org/xflatdb/xflat/db/EngineBase.html#hasUncomittedData()">hasUncomittedData</a></code>&nbsp;in class&nbsp;<code><a href="../../../../org/xflatdb/xflat/db/EngineBase.html" title="class in org.xflatdb.xflat.db">EngineBase</a></code></dd>
<dt><span class="strong">Returns:</span></dt><dd>true if this engine has uncommitted transactional data, false otherwise.</dd></dl>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar_bottom">
<!--   -->
</a><a href="#skip-navbar_bottom" title="Skip navigation links"></a><a name="navbar_bottom_firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/CachedDocumentEngine.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../index-files/index-1.html">Index</a></li>
<li><a href="../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li>Prev Class</li>
<li><a href="../../../../org/xflatdb/xflat/engine/DefaultEngineFactory.html" title="class in org.xflatdb.xflat.engine"><span class="strong">Next Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../index.html?org/xflatdb/xflat/engine/CachedDocumentEngine.html" target="_top">Frames</a></li>
<li><a href="CachedDocumentEngine.html" target="_top">No Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../../allclasses-noframe.html">All Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li><a href="#nested_classes_inherited_from_class_org.xflatdb.xflat.db.EngineBase">Nested</a>&nbsp;|&nbsp;</li>
<li><a href="#fields_inherited_from_class_org.xflatdb.xflat.db.EngineBase">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor_summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor_detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_detail">Method</a></li>
</ul>
</div>
<a name="skip-navbar_bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
</body>
</html>
